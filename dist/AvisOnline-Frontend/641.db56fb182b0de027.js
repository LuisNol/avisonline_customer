"use strict";(self.webpackChunkAvisOnline_Frontend=self.webpackChunkAvisOnline_Frontend||[]).push([[641],{8641:(y,c,i)=>{i.r(c),i.d(c,{CategoriesComponent:()=>E});var s=i(7248),l=i(4825),d=i(1413),g=i(6977),u=i(980),e=i(886),m=i(6173);const p=()=>["/anuncios"],f=t=>({category:t});function b(t,n){1&t&&(e.j41(0,"div",10)(1,"div",11)(2,"span",12),e.EFF(3,"Cargando categor\xedas..."),e.k0s()(),e.j41(4,"p",13),e.EFF(5,"Cargando categor\xedas desde el servidor..."),e.k0s()())}function v(t,n){if(1&t&&(e.j41(0,"div",14),e.nrm(1,"i",15),e.j41(2,"strong"),e.EFF(3,"Aviso:"),e.k0s(),e.EFF(4),e.nrm(5,"br"),e.j41(6,"small",16),e.EFF(7,"Mostrando datos de ejemplo mientras se restablece la conexi\xf3n."),e.k0s()()),2&t){const o=e.XpG();e.R7$(4),e.SpI(" ",o.error," ")}}function h(t,n){if(1&t&&(e.j41(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22),e.nrm(4,"i"),e.k0s(),e.j41(5,"h5",23),e.EFF(6),e.k0s(),e.j41(7,"p",24),e.EFF(8),e.k0s(),e.j41(9,"a",25),e.EFF(10," Ver anuncios "),e.k0s()()()()),2&t){const o=n.$implicit;e.R7$(4),e.HbH(o.icon+" fs-1 text-primary"),e.R7$(2),e.JRh(o.name),e.R7$(2),e.SpI("",o.count," anuncios"),e.R7$(),e.Y8G("routerLink",e.lJ4(6,p))("queryParams",e.eq3(7,f,o.id))}}function C(t,n){if(1&t&&(e.j41(0,"div",17),e.DNE(1,h,11,9,"div",18),e.k0s()),2&t){const o=e.XpG();e.R7$(),e.Y8G("ngForOf",o.categories)("ngForTrackBy",o.trackByCategory)}}function _(t,n){1&t&&(e.j41(0,"div",10),e.nrm(1,"i",26),e.j41(2,"h3",16),e.EFF(3,"No hay categor\xedas disponibles"),e.k0s(),e.j41(4,"p",16),e.EFF(5,"Las categor\xedas se cargar\xe1n cuando el servidor est\xe9 disponible."),e.k0s()())}let E=(()=>{class t{homeService;destroy$=new d.B;isLoading=!1;isConnected=!1;error=null;categories=[];constructor(o){this.homeService=o}ngOnInit(){this.loadCategories()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadCategories(){this.isLoading=!0,this.error=null,console.log("\u{1f680} Cargando categor\xedas desde el backend..."),this.homeService.getHomeData().pipe((0,g.Q)(this.destroy$),(0,u.j)(()=>{this.isLoading=!1})).subscribe({next:o=>{console.log("\u2705 Datos recibidos para categor\xedas:",o);const r=o.categories?.data||o.categories;if(!r||!Array.isArray(r))throw new Error("Formato de categor\xedas inv\xe1lido");this.categories=r.map(a=>({id:a.id,name:a.name,icon:this.mapBackendIconToBootstrap(a.icon),count:a.products_count||0,slug:a.name.toLowerCase().replace(/\s+/g,"-"),isActive:1===a.state})),this.isConnected=!0,console.log("\u{1f4c2} Categor\xedas cargadas exitosamente:",this.categories.length)},error:o=>{console.error("\u274c Error cargando categor\xedas:",o),this.isConnected=!1,this.error=0===o.status?"No se puede conectar con el servidor. \xbfEst\xe1 Laravel corriendo?":404===o.status?"Endpoint no encontrado. Verificar rutas del backend.":500===o.status?"Error interno del servidor. Revisar logs de Laravel.":`Error del servidor: ${o.status} - ${o.statusText}`,this.loadMockCategories()}})}mapBackendIconToBootstrap(o){return{"fas fa-home":"bi-house-fill","fas fa-couch":"bi-house-gear-fill","fas fa-football-ball":"bi-trophy-fill","fas fa-tools":"bi-tools","fas fa-paw":"bi-heart-fill","fas fa-briefcase":"bi-briefcase-fill","fas fa-ellipsis-h":"bi-three-dots","fas fa-laptop":"bi-laptop","fas fa-car":"bi-car-front-fill","fas fa-tshirt":"bi-bag-fill"}[o]||"bi-grid"}loadMockCategories(){this.categories=[{id:1,name:"Veh\xedculos",slug:"vehiculos",icon:"bi-car-front-fill",count:1250,isActive:!0},{id:2,name:"Inmuebles",slug:"inmuebles",icon:"bi-house-fill",count:890,isActive:!0},{id:3,name:"Electr\xf3nicos",slug:"electronicos",icon:"bi-laptop",count:675,isActive:!0},{id:4,name:"Moda",slug:"moda",icon:"bi-bag-fill",count:543,isActive:!0},{id:5,name:"Hogar",slug:"hogar",icon:"bi-house-gear-fill",count:432,isActive:!0},{id:6,name:"Deportes",slug:"deportes",icon:"bi-trophy-fill",count:321,isActive:!0},{id:7,name:"Mascotas",slug:"mascotas",icon:"bi-heart-fill",count:234,isActive:!0},{id:8,name:"Servicios",slug:"servicios",icon:"bi-tools",count:654,isActive:!0}],console.log("\u{1f4c2} Cargadas categor\xedas de ejemplo como fallback")}trackByCategory(o,r){return r.id}static \u0275fac=function(r){return new(r||t)(e.rXU(m.X))};static \u0275cmp=e.VBU({type:t,selectors:[["app-categories"]],decls:16,vars:9,consts:[[1,"container","py-4"],[1,"row"],[1,"col-12"],[1,"mb-4"],[1,"bi","bi-grid","me-2"],[1,"lead","text-muted","mb-5"],[1,"badge"],["class","text-center py-5",4,"ngIf"],["class","alert alert-warning","role","alert",4,"ngIf"],["class","row g-4",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3","text-muted"],["role","alert",1,"alert","alert-warning"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"text-muted"],[1,"row","g-4"],["class","col-lg-3 col-md-4 col-sm-6",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-lg-3","col-md-4","col-sm-6"],[1,"card","category-card","h-100","text-center","border-0","shadow-sm"],[1,"card-body","p-4"],[1,"category-icon","mb-3"],[1,"card-title"],[1,"card-text","text-muted"],[1,"btn","btn-outline-primary",3,"routerLink","queryParams"],[1,"bi","bi-folder2-open","fs-1","text-muted","mb-3"]],template:function(r,a){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),e.nrm(4,"i",4),e.EFF(5," Todas las Categor\xedas "),e.k0s(),e.j41(6,"p",5),e.EFF(7," Explora nuestras categor\xedas para encontrar exactamente lo que buscas "),e.k0s(),e.j41(8,"div",3)(9,"span",6),e.nrm(10,"i"),e.EFF(11),e.k0s()()()(),e.DNE(12,b,6,0,"div",7)(13,v,8,1,"div",8)(14,C,2,2,"div",9)(15,_,6,0,"div",7),e.k0s()),2&r&&(e.R7$(9),e.HbH(a.isConnected?"bg-success":"bg-warning"),e.R7$(),e.HbH(a.isConnected?"bi bi-check-circle me-1":"bi bi-exclamation-triangle me-1"),e.R7$(),e.SpI(" ",a.isConnected?"Conectado al servidor":"Modo de demostraci\xf3n"," "),e.R7$(),e.Y8G("ngIf",a.isLoading),e.R7$(),e.Y8G("ngIf",a.error&&!a.isLoading),e.R7$(),e.Y8G("ngIf",!a.isLoading),e.R7$(),e.Y8G("ngIf",!a.isLoading&&0===a.categories.length))},dependencies:[s.MD,s.Sq,s.bT,l.iI,l.Wk],styles:[".category-card[_ngcontent-%COMP%]{transition:all .3s ease;cursor:pointer;border-radius:16px;overflow:hidden;background:linear-gradient(135deg,#fff,#f8f9fa)}.category-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 20px 40px #0000001a!important}.category-card[_ngcontent-%COMP%]:hover   .category-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:scale(1.1);color:var(--bs-primary)!important}.category-icon[_ngcontent-%COMP%]{position:relative}.category-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:all .3s ease;background:linear-gradient(135deg,var(--bs-primary),var(--bs-info));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.btn-outline-primary[_ngcontent-%COMP%]{border-radius:25px;padding:8px 24px;font-weight:500;transition:all .3s ease}.btn-outline-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(var(--bs-primary-rgb),.3)}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}.badge[_ngcontent-%COMP%]{font-size:.875rem;padding:8px 16px;border-radius:20px}"]})}return t})()}}]);