"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[433],{7433:(T,d,n)=>{n.r(d),n.d(d,{OrdersProfileClientComponent:()=>x});var c=n(6814),l=n(95),u=n(7400),e=n(9212),g=n(7955),m=n(2425);const p=(r,a)=>a.id;function f(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"th",5),e._UZ(2,"img",10)(3,"br"),e.TgZ(4,"a",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,_=e.oxw(3);return e.KtG(_.reviewShow(i))}),e._uU(5,"Review"),e.qZA()(),e.TgZ(6,"td",6),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td",7),e._uU(11),e.qZA(),e.TgZ(12,"td",7),e._uU(13),e.qZA()()}if(2&r){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("src",t.product.imagen,e.LSH),e.xp6(5),e.Oqu(t.product.title),e.xp6(2),e.hij("",t.quantity," "),e.xp6(2),e.AsE("",t.subtotal," ",t.currency,""),e.xp6(2),e.AsE("",t.total," ",t.currency,"")}}function v(r,a){if(1&r&&e.YNc(0,f,14,7,"tr",9),2&r){const t=e.oxw().$implicit;e.Q6J("ngIf",t.sale_detail_show)}}function w(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"th",5),e._uU(2),e.qZA(),e.TgZ(3,"td",6),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",7),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"a",8),e.NdJ("click",function(){const _=e.CHM(t).$implicit,Z=e.oxw(2);return e.KtG(Z.detailShow(_))}),e._uU(11,"Detail"),e.qZA()()(),e.SjG(12,v,1,1,"tr",null,p)}if(2&r){const t=a.$implicit;e.xp6(2),e.hij(" #",t.n_transaccion,""),e.xp6(2),e.Oqu(t.method_payment),e.xp6(2),e.hij("",t.created_at," "),e.xp6(2),e.AsE("",t.total," ",t.currency_payment,""),e.xp6(4),e.wJu(t.sale_details)}}function C(r,a){if(1&r&&(e.TgZ(0,"table",3)(1,"thead")(2,"tr")(3,"th",4),e._uU(4,"N\xb0 Transacci\xf3n"),e.qZA(),e.TgZ(5,"th",4),e._uU(6,"Metodo de pago"),e.qZA(),e.TgZ(7,"th",4),e._uU(8,"Fecha de registro"),e.qZA(),e.TgZ(9,"th",4),e._uU(10,"Monto total"),e.qZA(),e.TgZ(11,"th",4),e._uU(12,"View"),e.qZA()()(),e.TgZ(13,"tbody"),e.SjG(14,w,14,5,null,null,p),e.qZA()()),2&r){const t=e.oxw();e.xp6(14),e.wJu(t.sales)}}const o=r=>({"start-gris":r});function h(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"div",11)(1,"h3",12),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4,"Your email address will not be published. Required fields are marked *"),e.qZA(),e.TgZ(5,"form",13)(6,"div",14)(7,"p"),e._uU(8,"Your Rating :"),e.qZA(),e.TgZ(9,"div",15)(10,"span",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedRating(1))}),e._UZ(11,"i",17),e.qZA(),e.TgZ(12,"span",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedRating(2))}),e._UZ(13,"i",17),e.qZA(),e.TgZ(14,"span",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedRating(3))}),e._UZ(15,"i",17),e.qZA(),e.TgZ(16,"span",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedRating(4))}),e._UZ(17,"i",17),e.qZA(),e.TgZ(18,"span",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedRating(5))}),e._UZ(19,"i",17),e.qZA()()(),e.TgZ(20,"div",18)(21,"div",19)(22,"div",20)(23,"textarea",21),e.NdJ("ngModelChange",function(i){e.CHM(t);const _=e.oxw();return e.KtG(_.message=i)}),e.qZA()()()(),e.TgZ(24,"div",22)(25,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.saveReview())}),e._uU(26),e.qZA(),e.TgZ(27,"button",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.backlist())}),e._uU(28,"Salir"),e.qZA()()()()}if(2&r){const t=e.oxw();e.xp6(2),e.hij('Review: "',t.sale_detail_review.product.title,'"'),e.xp6(8),e.Q6J("ngClass",e.VKq(8,o,t.rating<1)),e.xp6(2),e.Q6J("ngClass",e.VKq(10,o,t.rating<2)),e.xp6(2),e.Q6J("ngClass",e.VKq(12,o,t.rating<3)),e.xp6(2),e.Q6J("ngClass",e.VKq(14,o,t.rating<4)),e.xp6(2),e.Q6J("ngClass",e.VKq(16,o,t.rating<5)),e.xp6(5),e.Q6J("ngModel",t.message),e.xp6(3),e.hij(" ",t.sale_detail_review.review?"Editar Review":"Registrar Review"," ")}}let x=(()=>{class r{constructor(t,s){this.profileCliente=t,this.toast=s,this.sales=[],this.rating=0,this.message="",this.profileCliente.showOrders().subscribe(i=>{console.log(i),this.sales=i.sales.data})}detailShow(t){t.sale_detail_show=!t.sale_detail_show}reviewShow(t){this.sale_detail_review=t,this.sale_detail_review.review&&(this.rating=this.sale_detail_review.review.rating,this.message=this.sale_detail_review.review.message)}selectedRating(t){this.rating=t}backlist(){this.sale_detail_review=null,this.rating=0,this.message=""}saveReview(){if(!this.message||!this.rating)return void this.toast.error("Validaci\xf3n","Necesitas seleccionar una califaci\xf3n y llenar una rese\xf1a");let t={product_id:this.sale_detail_review.product_id,sale_detail_id:this.sale_detail_review.id,message:this.message,rating:this.rating};this.sale_detail_review.review?this.profileCliente.updateReview(this.sale_detail_review.review.id,t).subscribe(s=>{this.toast.success("Exitos","La rese\xf1a se edito correctamente"),this.sale_detail_review.review=s.review}):this.profileCliente.registerReview(t).subscribe(s=>{this.toast.success("Exitos","La rese\xf1a se registro correctamente"),this.sale_detail_review.review=s.review})}static#e=this.\u0275fac=function(s){return new(s||r)(e.Y36(g.K),e.Y36(m._W))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-orders-profile-client"]],standalone:!0,features:[e.jDz],decls:3,vars:2,consts:[[1,"profile__ticket","table-responsive"],["class","table",4,"ngIf"],["class","tp-product-details-review-form",4,"ngIf"],[1,"table"],["scope","col"],["scope","row"],["data-info","title"],["data-info","status pending"],["href","#","onclick","return false;",1,"tp-logout-btn",3,"click"],[4,"ngIf"],["alt","",2,"width","25%","object-fit","contain",3,"src"],[1,"tp-product-details-review-form"],[1,"tp-product-details-review-form-title"],["action","#"],[1,"tp-product-details-review-form-rating","d-flex","align-items-center"],[1,"tp-product-details-review-form-rating-icon","d-flex","align-items-center"],[1,"start-large",3,"ngClass","click"],[1,"fa-solid","fa-star"],[1,"tp-product-details-review-input-wrapper"],[1,"tp-product-details-review-input-box"],[1,"tp-product-details-review-input"],["id","message","name","message","placeholder","Write your review here...",3,"ngModel","ngModelChange"],[1,"tp-product-details-review-btn-wrapper"],["type","button",1,"tp-product-details-review-btn",3,"click"],["type","button",1,"btn","btn-dark","mx-3",3,"click"]],template:function(s,i){1&s&&(e.TgZ(0,"div",0),e.YNc(1,C,16,0,"table",1)(2,h,29,18,"div",2),e.qZA()),2&s&&(e.xp6(1),e.Q6J("ngIf",!i.sale_detail_review),e.xp6(1),e.Q6J("ngIf",i.sale_detail_review))},dependencies:[c.ez,c.mk,c.O5,l.u5,l._Y,l.Fj,l.JJ,l.JL,l.On,l.F,u.Bz],styles:[".start-large[_ngcontent-%COMP%]{font-size:xx-large}.start-gris[_ngcontent-%COMP%]{color:#9a9a9a!important}"]})}return r})()}}]);