import{a as Y}from"./chunk-3TTJKUW7.js";import{$ as P,Aa as j,B as S,Ba as L,Ca as q,Ha as z,I as _,K as b,L as E,M as t,N as i,O as u,Pa as B,R as g,S as m,T as o,X as l,Y as k,Z as f,_ as C,aa as O,ba as F,ca as I,da as w,fa as T,ga as R,i as y,ia as M,j as c,k as d,r as V,t as a,u as h,wa as N,xa as D,ya as W,za as $}from"./chunk-OQAZT47C.js";var A=(r,p)=>p.id,x=r=>({"start-gris":r});function G(r,p){if(r&1){let e=g();t(0,"tr")(1,"th",5),u(2,"img",10)(3,"br"),t(4,"a",8),m("click",function(){c(e);let n=o().$implicit,v=o(3);return d(v.reviewShow(n))}),l(5,"Review"),i()(),t(6,"td",6),l(7),i(),t(8,"td"),l(9),i(),t(10,"td",7),l(11),i(),t(12,"td",7),l(13),i()()}if(r&2){let e=o().$implicit;a(2),_("src",e.product.imagen,V),a(5),k(e.product.title),a(2),f("",e.quantity," "),a(2),C("",e.subtotal," ",e.currency,""),a(2),C("",e.total," ",e.currency,"")}}function U(r,p){if(r&1&&S(0,G,14,7,"tr",9),r&2){let e=o().$implicit;_("ngIf",e.sale_detail_show)}}function H(r,p){if(r&1){let e=g();t(0,"tr")(1,"th",5),l(2),i(),t(3,"td",6),l(4),i(),t(5,"td"),l(6),i(),t(7,"td",7),l(8),i(),t(9,"td")(10,"a",8),m("click",function(){let n=c(e).$implicit,v=o(2);return d(v.detailShow(n))}),l(11,"Detail"),i()()(),b(12,U,1,1,"tr",null,A)}if(r&2){let e=p.$implicit;a(2),f(" #",e.n_transaccion,""),a(2),k(e.method_payment),a(2),f("",e.created_at," "),a(2),C("",e.total," ",e.currency_payment,""),a(4),E(e.sale_details)}}function J(r,p){if(r&1&&(t(0,"table",3)(1,"thead")(2,"tr")(3,"th",4),l(4,"N\xB0 Transacci\xF3n"),i(),t(5,"th",4),l(6,"Metodo de pago"),i(),t(7,"th",4),l(8,"Fecha de registro"),i(),t(9,"th",4),l(10,"Monto total"),i(),t(11,"th",4),l(12,"View"),i()()(),t(13,"tbody"),b(14,H,14,5,null,null,A),i()()),r&2){let e=o();a(14),E(e.sales)}}function K(r,p){if(r&1){let e=g();t(0,"div",11)(1,"h3",12),l(2),i(),t(3,"p"),l(4,"Your email address will not be published. Required fields are marked *"),i(),t(5,"form",13)(6,"div",14)(7,"p"),l(8,"Your Rating :"),i(),t(9,"div",15)(10,"span",16),m("click",function(){c(e);let n=o();return d(n.selectedRating(1))}),u(11,"i",17),i(),t(12,"span",16),m("click",function(){c(e);let n=o();return d(n.selectedRating(2))}),u(13,"i",17),i(),t(14,"span",16),m("click",function(){c(e);let n=o();return d(n.selectedRating(3))}),u(15,"i",17),i(),t(16,"span",16),m("click",function(){c(e);let n=o();return d(n.selectedRating(4))}),u(17,"i",17),i(),t(18,"span",16),m("click",function(){c(e);let n=o();return d(n.selectedRating(5))}),u(19,"i",17),i()()(),t(20,"div",18)(21,"div",19)(22,"div",20)(23,"textarea",21),F("ngModelChange",function(n){c(e);let v=o();return O(v.message,n)||(v.message=n),d(n)}),i()()()(),t(24,"div",22)(25,"button",23),m("click",function(){c(e);let n=o();return d(n.saveReview())}),l(26),i(),t(27,"button",24),m("click",function(){c(e);let n=o();return d(n.backlist())}),l(28,"Salir"),i()()()()}if(r&2){let e=o();a(2),f('Review: "',e.sale_detail_review.product.title,'"'),a(8),_("ngClass",w(8,x,e.rating<1)),a(2),_("ngClass",w(10,x,e.rating<2)),a(2),_("ngClass",w(12,x,e.rating<3)),a(2),_("ngClass",w(14,x,e.rating<4)),a(2),_("ngClass",w(16,x,e.rating<5)),a(5),P("ngModel",e.message),a(3),f(" ",e.sale_detail_review.review?"Editar Review":"Registrar Review"," ")}}var ae=(()=>{class r{constructor(e,s){this.profileCliente=e,this.toast=s,this.sales=[],this.rating=0,this.message="",this.profileCliente.showOrders().subscribe(n=>{console.log(n),this.sales=n.sales.data})}detailShow(e){e.sale_detail_show=!e.sale_detail_show}reviewShow(e){this.sale_detail_review=e,this.sale_detail_review.review&&(this.rating=this.sale_detail_review.review.rating,this.message=this.sale_detail_review.review.message)}selectedRating(e){this.rating=e}backlist(){this.sale_detail_review=null,this.rating=0,this.message=""}saveReview(){if(!this.message||!this.rating){this.toast.error("Validaci\xF3n","Necesitas seleccionar una califaci\xF3n y llenar una rese\xF1a");return}let e={product_id:this.sale_detail_review.product_id,sale_detail_id:this.sale_detail_review.id,message:this.message,rating:this.rating};this.sale_detail_review.review?this.profileCliente.updateReview(this.sale_detail_review.review.id,e).subscribe(s=>{this.toast.success("Exitos","La rese\xF1a se edito correctamente"),this.sale_detail_review.review=s.review}):this.profileCliente.registerReview(e).subscribe(s=>{this.toast.success("Exitos","La rese\xF1a se registro correctamente"),this.sale_detail_review.review=s.review})}static{this.\u0275fac=function(s){return new(s||r)(h(Y),h(B))}}static{this.\u0275cmp=y({type:r,selectors:[["app-orders-profile-client"]],standalone:!0,features:[I],decls:3,vars:2,consts:[[1,"profile__ticket","table-responsive"],["class","table",4,"ngIf"],["class","tp-product-details-review-form",4,"ngIf"],[1,"table"],["scope","col"],["scope","row"],["data-info","title"],["data-info","status pending"],["href","#","onclick","return false;",1,"tp-logout-btn",3,"click"],[4,"ngIf"],["alt","",2,"width","25%","object-fit","contain",3,"src"],[1,"tp-product-details-review-form"],[1,"tp-product-details-review-form-title"],["action","#"],[1,"tp-product-details-review-form-rating","d-flex","align-items-center"],[1,"tp-product-details-review-form-rating-icon","d-flex","align-items-center"],[1,"start-large",3,"click","ngClass"],[1,"fa-solid","fa-star"],[1,"tp-product-details-review-input-wrapper"],[1,"tp-product-details-review-input-box"],[1,"tp-product-details-review-input"],["id","message","name","message","placeholder","Write your review here...",3,"ngModelChange","ngModel"],[1,"tp-product-details-review-btn-wrapper"],["type","button",1,"tp-product-details-review-btn",3,"click"],["type","button",1,"btn","btn-dark","mx-3",3,"click"]],template:function(s,n){s&1&&(t(0,"div",0),S(1,J,16,0,"table",1)(2,K,29,18,"div",2),i()),s&2&&(a(),_("ngIf",!n.sale_detail_review),a(),_("ngIf",n.sale_detail_review))},dependencies:[M,T,R,z,q,D,W,$,L,j,N],styles:[".start-large[_ngcontent-%COMP%]{font-size:xx-large}.start-gris[_ngcontent-%COMP%]{color:#9a9a9a!important}"]})}}return r})();export{ae as OrdersProfileClientComponent};
